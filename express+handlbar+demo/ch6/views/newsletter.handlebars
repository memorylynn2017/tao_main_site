<h2>sign up</h2>
<form id="newsletter" action="/newsletter" method="POST" class="form-horzontal">
	<input type="hidden" name="_csrf" value="{{csrf}}">
	<div class="form-group">
		<label for="fieldName" class="col-sm-2 control-label">name</label>
		<div class="col-sm-4">
			<input type="text" class="form-control" id="fieldName" name="name">
		</div>
	</div>
	<div class="form-group">
		<label for="fieldEmail" class="col-sm-2 control-label">email</label>
		<div class="col-sm-4">
			<input type="text" class="form-control" id="fieldEmail" name="email" require>
		</div>
	</div>
	<div class="form-group">
		<div class="col-sm=offset-2 col-sm-4">
			<button type="submit" class="btn btn-default">register</button>
		</div>
	</div>
</form>
<div id='msg'></div>
{{#if  flash}}
	<div class="alert alert-dismissible alert-{{flash.type}}">
		<button type="button" class="close" data-dismiss="alert" aria-hidden="true">
			&times;
		</button>
		<strong>{{flash.intro}}</strong>{{{flash.message}}}
	</div>
{{/if}}
<script>
	$(function(){
		$('#newsletter').on('submit',function(evt){
			evt.preventDefault();
			var action = $(this).attr('action');
			var $container = $('#msg');
			$.ajax({
				url:action,
				type:'POST',
				success: function(data){
					if(data.success){
						$container.html('had data and success');
					}else{
						$container.html('had data and failed');
					}
				},
				error: function(){
					$container.html('had error');
				}
			});
		});
	});
	
</script>